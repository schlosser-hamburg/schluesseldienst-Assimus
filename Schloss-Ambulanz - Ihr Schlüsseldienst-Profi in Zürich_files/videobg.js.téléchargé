"use strict";!function(t,e,i){var o=function(e){var o=this;this.$videoEl=t(e),this.videoType=this.$videoEl.attr("data-videotype"),this.$element=this.$videoEl.parent(),this.$window=t(i),this.isInTool=document.body.hasAttribute("data-istool"),document.querySelector('[data-cookiebot="true"]')?i.addEventListener("CookiebotOnAccept",function(){i.CookieConsent&&i.CookieConsent.consent.marketing&&o.init()}):this.init()};o.prototype={init:function(){i._monoVideoBG||(i._monoVideoBG={}),this.setRatio(),this.resizeVideo(),this.playVideo(),this.bindEvents()},setRatio:function(){this.ratio=this.$videoEl.attr("data-ratio")?parseFloat(this.$videoEl.attr("data-ratio")):this.$videoEl[0].videoWidth/this.$videoEl[0].videoHeight},playVideo:function(){var t=this;switch(this.videoType){case"youtube":i.YTReady||(i.YTReady=[]),(!document.querySelector('[data-cookiebot="true"]')||i.CookieConsent&&i.CookieConsent.consent.marketing)&&i._monoLoader.utils.waitFor(function(){return i.YT&&i.YT.loaded},function(){t.player=new i.YT.Player(t.$videoEl[0],{events:{onReady:function(e){t.isInTool?t.$videoEl.css("opacity",1):(e.target.mute(),e.target.playVideo())},onStateChange:function(e){if(e.data===i.YT.PlayerState.ENDED&&(e.target.mute(),e.target.playVideo()),e.data===i.YT.PlayerState.PLAYING){t.$videoEl.css("opacity",1);var o=e.target.getDuration()-e.target.getCurrentTime();e.target.rewindTO&&clearTimeout(e.target.rewindTO),e.target.rewindTO=setTimeout(function(){e.target.seekTo(0)},1e3*(o-.7))}}}})},2e4,100);break;case"vimeo":(!document.querySelector('[data-cookiebot="true"]')||i.CookieConsent&&i.CookieConsent.consent.marketing)&&i._monoLoader.utils.waitFor(function(){return i.Vimeo},function(){t.player=new i.Vimeo.Player(t.$videoEl[0]),t.player.ready().then(function(){t.playVimeo()})},2e4,50);break;default:t.$videoEl.css("opacity",1)}},resizeVideo:function(){var t,e,i=this.$element.outerWidth(),o=this.$element.outerHeight();i/this.ratio<o?(this.videoWidth=Math.ceil(o*this.ratio),this.videoHeight=o,e=(i-this.videoWidth)/2,t=0):(this.videoHeight=Math.ceil(i/this.ratio),this.videoWidth=i,e=0,t=(o-this.videoHeight)/2),this.$videoEl.css({width:this.videoWidth,height:this.videoHeight,left:e,top:t})},bindEvents:function(){this.$window.on("resize.monovideobg",t.proxy(this.resizeVideo,this))},playVimeo:function(){var t=this;t.isInTool||(t.player.setVolume(0),t.player.play()),t.$videoEl.css("opacity",1)}},t.fn.monovideobg=function(){return this.each(function(){t.data(this,"monovideobg")||t.data(this,"monovideobg",new o(this))})}}(jQuery,Modernizr,window),$('[data-req*="videobg"]').each(function(t,e){$(e).monovideobg()});